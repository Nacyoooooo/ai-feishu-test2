# å‚æ•°å¼‚å¸¸æµ‹è¯•ç”¨ä¾‹é…ç½®
# åŸºäºé£ä¹¦APIæ–‡æ¡£ç”Ÿæˆçš„å‚æ•°å¼‚å¸¸åœºæ™¯æµ‹è¯•

# å‘é€æ¶ˆæ¯APIå‚æ•°å¼‚å¸¸æµ‹è¯•
send_message_anomalies:
  # æ¥æ”¶è€…IDå¼‚å¸¸
  - test_name: "test_receive_id_null"
    description: "æ¥æ”¶è€…IDä¸ºnull"
    parameter_name: "receive_id"
    test_value: null
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_receive_id_empty"
    description: "æ¥æ”¶è€…IDä¸ºç©ºå­—ç¬¦ä¸²"
    parameter_name: "receive_id"
    test_value: ""
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_receive_id_invalid_format"
    description: "æ¥æ”¶è€…IDæ ¼å¼é”™è¯¯"
    parameter_name: "receive_id"
    test_value: "invalid_id_format"
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_receive_id_special_chars"
    description: "æ¥æ”¶è€…IDåŒ…å«ç‰¹æ®Šå­—ç¬¦"
    parameter_name: "receive_id"
    test_value: "ou_<script>alert('xss')</script>"
    expected_code: 230001
    priority: "P1"
    
  - test_name: "test_receive_id_very_long"
    description: "æ¥æ”¶è€…IDè¶…é•¿"
    parameter_name: "receive_id"
    test_value: "ou_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
    expected_code: 230001
    priority: "P1"
    
  # æ¥æ”¶è€…IDç±»å‹å¼‚å¸¸
  - test_name: "test_receive_id_type_null"
    description: "æ¥æ”¶è€…IDç±»å‹ä¸ºnull"
    parameter_name: "receive_id_type"
    test_value: null
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_receive_id_type_empty"
    description: "æ¥æ”¶è€…IDç±»å‹ä¸ºç©ºå­—ç¬¦ä¸²"
    parameter_name: "receive_id_type"
    test_value: ""
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_receive_id_type_invalid"
    description: "æ¥æ”¶è€…IDç±»å‹æ— æ•ˆ"
    parameter_name: "receive_id_type"
    test_value: "invalid_type"
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_receive_id_type_case_sensitive"
    description: "æ¥æ”¶è€…IDç±»å‹å¤§å°å†™æ•æ„Ÿ"
    parameter_name: "receive_id_type"
    test_value: "OPEN_ID"
    expected_code: 230001
    priority: "P1"
    
  # æ¶ˆæ¯å†…å®¹å¼‚å¸¸
  - test_name: "test_content_null"
    description: "æ¶ˆæ¯å†…å®¹ä¸ºnull"
    parameter_name: "content"
    test_value: null
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_empty"
    description: "æ¶ˆæ¯å†…å®¹ä¸ºç©ºå¯¹è±¡"
    parameter_name: "content"
    test_value: {}
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_empty_string"
    description: "æ¶ˆæ¯å†…å®¹ä¸ºç©ºå­—ç¬¦ä¸²"
    parameter_name: "content"
    test_value: {"text": ""}
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_invalid_format"
    description: "æ¶ˆæ¯å†…å®¹æ ¼å¼é”™è¯¯"
    parameter_name: "content"
    test_value: {"invalid_key": "test"}
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_missing_text"
    description: "æ¶ˆæ¯å†…å®¹ç¼ºå°‘textå­—æ®µ"
    parameter_name: "content"
    test_value: {"other_field": "test"}
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_text_null"
    description: "textå­—æ®µä¸ºnull"
    parameter_name: "content"
    test_value: {"text": null}
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_text_not_string"
    description: "textå­—æ®µä¸æ˜¯å­—ç¬¦ä¸²"
    parameter_name: "content"
    test_value: {"text": 123}
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_text_array"
    description: "textå­—æ®µæ˜¯æ•°ç»„"
    parameter_name: "content"
    test_value: {"text": ["test"]}
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_text_object"
    description: "textå­—æ®µæ˜¯å¯¹è±¡"
    parameter_name: "content"
    test_value: {"text": {"nested": "test"}}
    expected_code: 230001
    priority: "P0"
    
  # æ¶ˆæ¯ç±»å‹å¼‚å¸¸
  - test_name: "test_msg_type_null"
    description: "æ¶ˆæ¯ç±»å‹ä¸ºnull"
    parameter_name: "msg_type"
    test_value: null
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_msg_type_empty"
    description: "æ¶ˆæ¯ç±»å‹ä¸ºç©ºå­—ç¬¦ä¸²"
    parameter_name: "msg_type"
    test_value: ""
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_msg_type_invalid"
    description: "æ¶ˆæ¯ç±»å‹æ— æ•ˆ"
    parameter_name: "msg_type"
    test_value: "invalid_type"
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_msg_type_case_sensitive"
    description: "æ¶ˆæ¯ç±»å‹å¤§å°å†™æ•æ„Ÿ"
    parameter_name: "msg_type"
    test_value: "TEXT"
    expected_code: 230001
    priority: "P1"
    
  - test_name: "test_msg_type_special_chars"
    description: "æ¶ˆæ¯ç±»å‹åŒ…å«ç‰¹æ®Šå­—ç¬¦"
    parameter_name: "msg_type"
    test_value: "text<script>"
    expected_code: 230001
    priority: "P1"
    
  # UUIDå¼‚å¸¸
  - test_name: "test_uuid_empty"
    description: "UUIDä¸ºç©ºå­—ç¬¦ä¸²"
    parameter_name: "uuid"
    test_value: ""
    expected_code: 230001
    priority: "P1"
    
  - test_name: "test_uuid_invalid_format"
    description: "UUIDæ ¼å¼é”™è¯¯"
    parameter_name: "uuid"
    test_value: "invalid-uuid-format"
    expected_code: 230001
    priority: "P1"
    
  - test_name: "test_uuid_very_long"
    description: "UUIDè¶…é•¿"
    parameter_name: "uuid"
    test_value: "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
    expected_code: 230001
    priority: "P1"
    
  - test_name: "test_uuid_special_chars"
    description: "UUIDåŒ…å«ç‰¹æ®Šå­—ç¬¦"
    parameter_name: "uuid"
    test_value: "test-uuid<script>alert('xss')</script>"
    expected_code: 230001
    priority: "P1"

# è¾¹ç•Œå€¼æµ‹è¯•
boundary_value_tests:
  # æ¶ˆæ¯é•¿åº¦è¾¹ç•Œå€¼
  - test_name: "test_message_length_min"
    description: "æ¶ˆæ¯é•¿åº¦ä¸ºæœ€å°å€¼(1å­—ç¬¦)"
    parameter_name: "content"
    test_value: {"text": "a"}
    expected_code: 0
    priority: "P1"
    
#  - test_name: "test_message_length_max"
#    description: "æ¶ˆæ¯é•¿åº¦ä¸ºæœ€å¤§å€¼(150KB)"
#    parameter_name: "content"
#    test_value: {"text": "a" * (150 * 1024)}
#    expected_code: 0
#    priority: "P1"
#
#  - test_name: "test_message_length_exceed"
#    description: "æ¶ˆæ¯é•¿åº¦è¶…è¿‡æœ€å¤§å€¼"
#    parameter_name: "content"
#    test_value: {"text": "a" * (150 * 1024 + 1)}
#    expected_code: 230025
#    priority: "P0"
    
  - test_name: "test_message_length_zero"
    description: "æ¶ˆæ¯é•¿åº¦ä¸º0"
    parameter_name: "content"
    test_value: {"text": ""}
    expected_code: 230001
    priority: "P0"
    
  # æ¥æ”¶è€…IDé•¿åº¦è¾¹ç•Œå€¼
  - test_name: "test_receive_id_length_min"
    description: "æ¥æ”¶è€…IDé•¿åº¦ä¸ºæœ€å°å€¼"
    parameter_name: "receive_id"
    test_value: "ou_a"
    expected_code: 230001
    priority: "P1"
    
  - test_name: "test_receive_id_length_max"
    description: "æ¥æ”¶è€…IDé•¿åº¦ä¸ºæœ€å¤§å€¼"
    parameter_name: "receive_id"
    test_value: "ou_aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
    expected_code: 230001
    priority: "P1"

# ç‰¹æ®Šå­—ç¬¦æµ‹è¯•
special_chars_tests:
  - test_name: "test_content_xss_injection"
    description: "XSSæ³¨å…¥æµ‹è¯•"
    parameter_name: "content"
    test_value: {"text": "<script>alert('xss')</script>"}
    expected_code: 0
    priority: "P1"
    
  - test_name: "test_content_sql_injection"
    description: "SQLæ³¨å…¥æµ‹è¯•"
    parameter_name: "content"
    test_value: {"text": "'; DROP TABLE users; --"}
    expected_code: 0
    priority: "P1"
    
  - test_name: "test_content_emoji"
    description: "è¡¨æƒ…ç¬¦å·æµ‹è¯•"
    parameter_name: "content"
    test_value: {"text": "ğŸ‰ğŸš€ğŸ’»æµ‹è¯•ä¸­æ–‡ç‰¹æ®Šå­—ç¬¦!@#$%^&*()"}
    expected_code: 0
    priority: "P1"
    
  - test_name: "test_content_unicode"
    description: "Unicodeå­—ç¬¦æµ‹è¯•"
    parameter_name: "content"
    test_value: {"text": "æµ‹è¯•ä¸­æ–‡\u4e2d\u6587\u6d4b\u8bd5"}
    expected_code: 0
    priority: "P1"
    
  - test_name: "test_content_html_entities"
    description: "HTMLå®ä½“æµ‹è¯•"
    parameter_name: "content"
    test_value: {"text": "&lt;script&gt;alert('xss')&lt;/script&gt;"}
    expected_code: 0
    priority: "P1"
    
  - test_name: "test_content_url_encoding"
    description: "URLç¼–ç æµ‹è¯•"
    parameter_name: "content"
    test_value: {"text": "test%20message%20with%20spaces"}
    expected_code: 0
    priority: "P1"

# æ•°æ®ç±»å‹å¼‚å¸¸æµ‹è¯•
data_type_anomalies:
  - test_name: "test_receive_id_number"
    description: "æ¥æ”¶è€…IDä¸ºæ•°å­—"
    parameter_name: "receive_id"
    test_value: 12345
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_receive_id_boolean"
    description: "æ¥æ”¶è€…IDä¸ºå¸ƒå°”å€¼"
    parameter_name: "receive_id"
    test_value: true
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_receive_id_array"
    description: "æ¥æ”¶è€…IDä¸ºæ•°ç»„"
    parameter_name: "receive_id"
    test_value: ["test"]
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_receive_id_object"
    description: "æ¥æ”¶è€…IDä¸ºå¯¹è±¡"
    parameter_name: "receive_id"
    test_value: {"id": "test"}
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_number"
    description: "æ¶ˆæ¯å†…å®¹ä¸ºæ•°å­—"
    parameter_name: "content"
    test_value: 12345
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_boolean"
    description: "æ¶ˆæ¯å†…å®¹ä¸ºå¸ƒå°”å€¼"
    parameter_name: "content"
    test_value: true
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_string"
    description: "æ¶ˆæ¯å†…å®¹ä¸ºå­—ç¬¦ä¸²"
    parameter_name: "content"
    test_value: "test message"
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_msg_type_number"
    description: "æ¶ˆæ¯ç±»å‹ä¸ºæ•°å­—"
    parameter_name: "msg_type"
    test_value: 123
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_msg_type_boolean"
    description: "æ¶ˆæ¯ç±»å‹ä¸ºå¸ƒå°”å€¼"
    parameter_name: "msg_type"
    test_value: true
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_msg_type_array"
    description: "æ¶ˆæ¯ç±»å‹ä¸ºæ•°ç»„"
    parameter_name: "msg_type"
    test_value: ["text"]
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_msg_type_object"
    description: "æ¶ˆæ¯ç±»å‹ä¸ºå¯¹è±¡"
    parameter_name: "msg_type"
    test_value: {"type": "text"}
    expected_code: 230001
    priority: "P0"

# ç»„åˆå¼‚å¸¸æµ‹è¯•
combination_anomalies:
  - test_name: "test_multiple_parameters_null"
    description: "å¤šä¸ªå‚æ•°ä¸ºnull"
    test_data:
      receive_id: null
      receive_id_type: null
      content: null
      msg_type: null
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_multiple_parameters_empty"
    description: "å¤šä¸ªå‚æ•°ä¸ºç©º"
    test_data:
      receive_id: ""
      receive_id_type: ""
      content: {}
      msg_type: ""
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_multiple_parameters_invalid"
    description: "å¤šä¸ªå‚æ•°æ— æ•ˆ"
    test_data:
      receive_id: "invalid_id"
      receive_id_type: "invalid_type"
      content: {"invalid": "format"}
      msg_type: "invalid_type"
    expected_code: 230001
    priority: "P0"
    
  - test_name: "test_content_and_msg_type_mismatch"
    description: "æ¶ˆæ¯å†…å®¹ä¸ç±»å‹ä¸åŒ¹é…"
    test_data:
      receive_id: "ou_adf4e416e22c12c5d4b40e347315f68c"
      receive_id_type: "open_id"
      content: {"text": "test"}
      msg_type: "file"
    expected_code: 230055
    priority: "P0" 